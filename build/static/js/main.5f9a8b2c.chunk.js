(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),s=n(9),o=n.n(s),l=n(14),u=n(17),d=n(146),p=n(2),j=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],s={display:c?"none":""},o={display:c?"":"none"},l=function(){i(!c)};return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:s,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",size:"small",onClick:l,children:e.buttonLabel})}),Object(p.jsxs)("div",{style:o,className:"togglableContent",children:[e.children,Object(p.jsx)(d.a,{variant:"contained",color:"primary",size:"small",onClick:l,children:"hide"})]})]})}));j.displayName="Togglable";var b=j,h=n(138),m=n(139),g=n(140),f=n(106),x=n(141),v=Object(h.a)((function(){return{blog:{padding:"20px",margin:"20px"}}})),O=function(e){var t=e.blog,n=e.handleLike,a=e.handleDelete,r=v();return Object(p.jsx)(m.a,{variant:"outlined",className:r.blog,children:Object(p.jsxs)(g.a,{children:[Object(p.jsx)(f.a,{variant:"h4",className:"title",children:t.title}),Object(p.jsx)(f.a,{variant:"h5",className:"author",children:t.author}),Object(p.jsxs)(b,{buttonLabel:"view",children:[Object(p.jsx)(x.a,{href:t.url,children:t.url}),Object(p.jsxs)(f.a,{children:["likes ",t.likes," ",Object(p.jsx)(d.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){return n(t)},className:"like",children:"like"})," "]}),Object(p.jsx)("div",{}),Object(p.jsx)(d.a,{color:"secondary",variant:"outlined",size:"small",onClick:function(){return a(t)},children:"Delete"})]})]})})},y=n(24),w=n.n(y),k="/api/blogs",C=null,S={getAll:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(k);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},e.next=3,w.a.post(k,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat(k,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){C="bearer ".concat(e)},Delete:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},e.next=3,w.a.delete("".concat(k,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N={login:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T={register:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("api/users",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){var t=e.message,n=e.errormessage;return null===t&&null===n?null:Object(p.jsxs)("div",{children:[null!==n?Object(p.jsx)("div",{className:"error",children:n}):Object(p.jsx)("div",{}),null!==t?Object(p.jsx)("div",{className:"message",children:t}):Object(p.jsx)("div",{})]})},W=n(147),I=n(143),R=n(145),U=n(144),B=n(142),q=n(29),z=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),P=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,r=e.username,c=e.password,i=z();return Object(p.jsxs)(B.a,{component:"main",maxWidth:"xs",children:[Object(p.jsx)(I.a,{}),Object(p.jsxs)("div",{className:i.paper,children:[Object(p.jsx)(W.a,{className:i.avatar}),Object(p.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(p.jsxs)("form",{onSubmit:t,className:i.form,noValidate:!0,children:[Object(p.jsx)(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:r,onChange:n,autoFocus:!0}),Object(p.jsx)(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:a}),Object(p.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Sign In"}),Object(p.jsx)(U.a,{container:!0,children:Object(p.jsx)(U.a,{item:!0,children:Object(p.jsx)(q.b,{to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})]})},A=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(e){var t=A(),n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),o=Object(u.a)(s,2),l=o[0],j=o[1],b=Object(a.useState)(""),h=Object(u.a)(b,2),m=h[0],g=h[1];return Object(p.jsxs)(B.a,{component:"main",maxWidth:"xs",children:[Object(p.jsx)(f.a,{component:"h3",variant:"h5",children:e.username}),Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.createBlog({author:l,title:c,url:m}),j(""),i(""),g("")},className:t.form,children:[Object(p.jsx)(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",type:"text",label:"title",value:c,onChange:function(e){i(e.target.value)}}),Object(p.jsx)(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"author",type:"text",value:l,label:"author",onChange:function(e){j(e.target.value)}}),Object(p.jsx)(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"url",label:"url",type:"text",value:m,onChange:function(e){g(e.target.value)}}),Object(p.jsx)(d.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,type:"submit",children:"Save"})]})]})},L=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),E=function(e){var t=e.handleRegister,n=e.handleRegisterUsernameChange,a=e.handleRegisterPasswordChange,r=e.Registerusername,c=e.Registerpassword,i=L();return Object(p.jsxs)(B.a,{component:"main",maxWidth:"xs",children:[Object(p.jsx)(I.a,{}),Object(p.jsxs)("div",{className:i.paper,children:[Object(p.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(p.jsxs)("form",{className:i.form,onSubmit:t,noValidate:!0,children:[Object(p.jsxs)(U.a,{container:!0,spacing:2,children:[Object(p.jsx)(U.a,{item:!0,xs:12,children:Object(p.jsx)(R.a,{variant:"outlined",required:!0,fullWidth:!0,value:r,onChange:n,label:"username",name:"ussername"})}),Object(p.jsx)(U.a,{item:!0,xs:12,children:Object(p.jsx)(R.a,{variant:"outlined",required:!0,fullWidth:!0,value:c,onChange:a,name:"password",label:"Password",type:"password",id:"password"})})]}),Object(p.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Sign Up"}),Object(p.jsx)(U.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(U.a,{item:!0,children:Object(p.jsx)(q.b,{to:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})},V=n(12),F=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),s=i[0],j=i[1],b=Object(a.useState)(""),h=Object(u.a)(b,2),m=h[0],g=h[1],x=Object(a.useState)(null),v=Object(u.a)(x,2),y=v[0],w=v[1],k=Object(a.useState)(null),C=Object(u.a)(k,2),W=C[0],I=C[1],R=Object(a.useState)(null),U=Object(u.a)(R,2),z=U[0],A=U[1],L=Object(a.useState)(!1),F=Object(u.a)(L,2),G=F[0],H=F[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);w(t),S.setToken(t.token)}K()}),[]);var K=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:(t=e.sent).sort((function(e,t){return t.likes-e.likes})),r(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,N.login({username:s,password:m});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),S.setToken(n.token),console.log(n),w(n),j(""),g(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),I("Wrong credentials"),setTimeout((function(){I(null)}),5e3);case 17:console.log("logging in with",s,m);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("This works"),console.log(s,m),e.prev=3,e.next=6,T.register({username:s,password:m});case 6:n=e.sent,console.log(n),A("".concat(s," account has been created!!")),setTimeout((function(){A(null),history.go("/")}),5e3),g(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0.response.data),setTimeout((function(){I(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.author,r=t.url,e.prev=1,console.log(n,a,r),e.next=5,S.create({title:n,author:a,url:r});case 5:c=e.sent,console.log(c),A("a new blog ".concat(n," by ").concat(a," is added")),H(!1),K(),setTimeout((function(){A(null)}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),I(e.t0),setTimeout((function(){I(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.likes+1,a={user:t.user.id,likes:n,author:t.author,title:t.title,url:t.url},e.next=4,S.update(t.id,a);case 4:r=e.sent,console.log(r),K();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))){(n=window.localStorage.getItem("loggedBlogappUser"))&&(a=JSON.parse(n),w(a),S.setToken(a.token));try{r=S.Delete(t.id),A("blog ".concat(t.title," by ").concat(t.author," has been deleted")),setTimeout((function(){A(null)}),5e3),K(),console.log(r)}catch(c){I(c),setTimeout((function(){I(null)}),5e3)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(q.a,{children:Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(f.a,{style:{fontSize:"70px",margin:"0px"},children:"Web Dev Diaries"}),Object(p.jsx)(D,{message:z,errormessage:W}),null===y?Object(p.jsxs)(V.c,{children:[Object(p.jsx)(V.a,{exact:!0,path:"/",children:Object(p.jsx)(P,{username:s,password:m,handleUsernameChange:function(e){var t=e.target;return j(t.value)},handlePasswordChange:function(e){var t=e.target;return g(t.value)},handleSubmit:M})}),Object(p.jsx)(V.a,{exact:!0,path:"/register",children:Object(p.jsx)(E,{handleRegister:Q,handleRegisterUsernameChange:function(e){var t=e.target;return j(t.value)},handleRegisterPasswordChange:function(e){var t=e.target;return g(t.value)},Registerusername:s,Registerpassword:m})})]}):Object(p.jsxs)(B.a,{children:[Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",margin:"20px"},children:[Object(p.jsxs)(f.a,{align:"center",children:[y.username," is logged-in"]}),Object(p.jsx)(d.a,{color:"secondary",variant:"outlined",onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),history.go("/")},children:"Logout"})]}),function(){var e={display:G?"none":""},t={display:G?"":"none"};return Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(p.jsx)("div",{style:e,children:Object(p.jsx)(d.a,{variant:"contained",colour:"primary",onClick:function(){return H(!0)},children:"Create New Blog"})}),Object(p.jsxs)("div",{style:t,children:[Object(p.jsx)(J,{username:s,createBlog:X}),Object(p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(p.jsx)(d.a,{variant:"contained",colour:"primary",onClick:function(){return H(!1)},children:"cancel"})})]})]})}(),n.map((function(e){return Object(p.jsx)(O,{blog:e,handleLike:Y,handleDelete:Z},e.id)}))]})]})})};n(103);i.a.render(Object(p.jsx)(F,{}),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.5f9a8b2c.chunk.js.map