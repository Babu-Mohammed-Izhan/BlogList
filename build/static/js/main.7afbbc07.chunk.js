(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(11),c=n.n(r),s=n(9),i=n.n(s),o=n(16),l=n(22),u=n(150),d=n(153),j=n(155),p=n(121),h=n(156),b=n(157),m=n(77),f=n.n(m),g=n(78),x=n.n(g),O=n(3),v=Object(u.a)((function(){return{blog:{padding:"20px",margin:"20px"}}})),w=function(e){var t=e.blog,n=e.handleLike,a=e.handleDelete,r=v();return Object(O.jsx)(d.a,{className:r.blog,children:Object(O.jsxs)(j.a,{children:[Object(O.jsxs)("div",{style:{marginLeft:"25px"},children:[Object(O.jsx)(p.a,{className:"title",children:t.title}),Object(O.jsx)(p.a,{className:"author",children:t.author}),Object(O.jsx)(h.a,{href:t.url,children:t.url}),Object(O.jsxs)(p.a,{variant:"h6",children:[t.likes,"   ",Object(O.jsx)(b.a,{size:"small",color:"primary",onClick:function(){return n(t)},className:"like",children:Object(O.jsx)(f.a,{color:"primary"})})]})]}),Object(O.jsx)(b.a,{color:"secondary",size:"small",onClick:function(){return a(t)},children:Object(O.jsx)(x.a,{color:"secondary"})})]})})},y=n(27),k=n.n(y),S="/api/blogs",C=null,N={getAll:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(S);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},e.next=3,k.a.post(S,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("".concat(S,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){C="bearer ".concat(e)},Delete:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},e.next=3,k.a.delete("".concat(S,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T={login:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W={register:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("api/users",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=n(164),I=function(e){var t=e.message,n=e.errormessage;return null===t&&null===n?null:Object(O.jsxs)("div",{children:[null!==n?Object(O.jsx)(D.a,{className:"error",variant:"filled",severity:"error",children:n}):Object(O.jsx)("div",{}),null!==t?Object(O.jsx)(D.a,{className:"message",variant:"filled",severity:"success",children:t}):Object(O.jsx)("div",{})]})},R=n(159),U=n(163),B=n(160),q=n(158),P=n(36),A=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,r=e.username,c=e.password,s=A();return Object(O.jsxs)(q.a,{component:"main",maxWidth:"xs",className:s.paper,children:[Object(O.jsx)(R.a,{}),Object(O.jsxs)("div",{className:s.paper,children:[Object(O.jsx)(p.a,{component:"h1",variant:"h4",children:"Sign in"}),Object(O.jsxs)("form",{onSubmit:t,className:s.form,noValidate:!0,children:[Object(O.jsx)(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:r,onChange:n,autoFocus:!0}),Object(O.jsx)(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:a}),Object(O.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Sign In"}),Object(O.jsx)(B.a,{container:!0,children:Object(O.jsx)(B.a,{item:!0,children:Object(O.jsx)(P.b,{to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})]})},z=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),L=function(e){var t=z(),n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(a.useState)(""),h=Object(l.a)(j,2),m=h[0],f=h[1];return Object(O.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(p.a,{component:"h3",variant:"h5",children:e.username}),Object(O.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.createBlog({author:u,title:c,url:m}),d(""),s(""),f("")},className:t.form,children:[Object(O.jsx)(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",type:"text",label:"title",value:c,onChange:function(e){s(e.target.value)}}),Object(O.jsx)(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"author",type:"text",value:u,label:"author",onChange:function(e){d(e.target.value)}}),Object(O.jsx)(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"url",label:"url",type:"text",value:m,onChange:function(e){f(e.target.value)}}),Object(O.jsx)(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,type:"submit",children:"Save"})]})]})},E=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),V=function(e){var t=e.handleRegister,n=e.handleRegisterUsernameChange,a=e.handleRegisterPasswordChange,r=e.Registerusername,c=e.Registerpassword,s=E();return Object(O.jsxs)(q.a,{component:"main",maxWidth:"xs",className:s.paper,children:[Object(O.jsx)(R.a,{}),Object(O.jsxs)("div",{className:s.paper,children:[Object(O.jsx)(p.a,{component:"h1",variant:"h4",children:"Sign up"}),Object(O.jsxs)("form",{className:s.form,onSubmit:t,noValidate:!0,children:[Object(O.jsxs)(B.a,{container:!0,spacing:2,children:[Object(O.jsx)(B.a,{item:!0,xs:12,children:Object(O.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,value:r,onChange:n,label:"username",name:"ussername"})}),Object(O.jsx)(B.a,{item:!0,xs:12,children:Object(O.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,value:c,onChange:a,name:"password",label:"Password",type:"password",id:"password"})})]}),Object(O.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Sign Up"}),Object(O.jsx)(B.a,{container:!0,justifyContent:"flex-end",children:Object(O.jsx)(B.a,{item:!0,children:Object(O.jsx)(P.b,{to:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})},F=n(12),G=n(161),H=n(162),K=Object(u.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},mainpage:{marginTop:"100px"}}})),M=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),u=s[0],d=s[1],j=Object(a.useState)(""),h=Object(l.a)(j,2),m=h[0],f=h[1],g=Object(a.useState)(null),x=Object(l.a)(g,2),v=x[0],y=x[1],k=Object(a.useState)(null),S=Object(l.a)(k,2),C=S[0],D=S[1],R=Object(a.useState)(null),U=Object(l.a)(R,2),A=U[0],z=U[1],E=Object(a.useState)(!1),M=Object(l.a)(E,2),Q=M[0],X=M[1],Y=K();Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);y(t),N.setToken(t.token)}Z()}),[]);var Z=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getAll();case 2:(t=e.sent).sort((function(e,t){return t.likes-e.likes})),r(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,T.login({username:u,password:m});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),N.setToken(n.token),console.log(n),y(n),d(""),f(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),D("Wrong credentials"),setTimeout((function(){D(null)}),5e3);case 17:console.log("logging in with",u,m);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,W.register({username:u,password:m});case 4:n=e.sent,console.log(n),z("".concat(u," account has been created!!")),setTimeout((function(){z(null),history.go("/")}),5e3),f(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),D(e.t0.response.data.error),setTimeout((function(){D(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.author,r=t.url,e.prev=1,console.log(n,a,r),e.next=5,N.create({title:n,author:a,url:r});case 5:c=e.sent,console.log(c),z("a new blog ".concat(n," by ").concat(a," is added")),X(!1),Z(),setTimeout((function(){z(null)}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),D(e.t0),setTimeout((function(){D(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.likes+1,a={user:t.user.id,likes:n,author:t.author,title:t.title,url:t.url},e.next=4,N.update(t.id,a);case 4:r=e.sent,console.log(r),Z();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))){(n=window.localStorage.getItem("loggedBlogappUser"))&&(a=JSON.parse(n),y(a),N.setToken(a.token));try{r=N.Delete(t.id),z("blog ".concat(t.title," by ").concat(t.author," has been deleted")),setTimeout((function(){z(null)}),5e3),Z(),console.log(r)}catch(c){D(c),setTimeout((function(){D(null)}),5e3)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(P.a,{children:Object(O.jsxs)("div",{className:Y.root,children:[Object(O.jsx)(I,{message:A,errormessage:C}),null===v?Object(O.jsxs)(q.a,{children:[Object(O.jsx)(G.a,{position:"fixed",children:Object(O.jsx)(H.a,{children:Object(O.jsx)(p.a,{variant:"h6",edge:"start",className:Y.title,children:"Web Dev Diaries"})})}),Object(O.jsxs)(F.c,{children:[Object(O.jsx)(F.a,{exact:!0,path:"/",children:Object(O.jsx)(J,{username:u,password:m,handleUsernameChange:function(e){var t=e.target;return d(t.value)},handlePasswordChange:function(e){var t=e.target;return f(t.value)},handleSubmit:$})}),Object(O.jsx)(F.a,{exact:!0,path:"/register",children:Object(O.jsx)(V,{handleRegister:_,handleRegisterUsernameChange:function(e){var t=e.target;return d(t.value)},handleRegisterPasswordChange:function(e){var t=e.target;return f(t.value)},Registerusername:u,Registerpassword:m})})]})]}):Object(O.jsxs)(q.a,{children:[Object(O.jsx)(G.a,{position:"fixed",children:Object(O.jsxs)(H.a,{children:[Object(O.jsx)(p.a,{variant:"h6",edge:"start",className:Y.title,children:"Web Dev Diaries"}),Object(O.jsx)(p.a,{children:v.username}),Object(O.jsx)(b.a,{color:"inherit",onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),history.go("/")},children:"Logout"})]})}),Object(O.jsxs)(q.a,{className:Y.mainpage,children:[Object(O.jsx)(B.a,{container:!0,spacing:3,children:n.map((function(e){return Object(O.jsx)(B.a,{item:!0,xs:12,sm:12,md:6,direction:"row",justifyContent:"center",alignItems:"center",children:Object(O.jsx)(w,{blog:e,handleLike:te,handleDelete:ne},e.id)},e.id)}))}),function(){var e={display:Q?"none":""},t={display:Q?"":"none"};return Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(O.jsx)("div",{style:e,children:Object(O.jsx)(b.a,{variant:"contained",colour:"primary",onClick:function(){return X(!0)},children:"Create New Blog"})}),Object(O.jsxs)("div",{style:t,children:[Object(O.jsx)(L,{username:u,createBlog:ee}),Object(O.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(O.jsx)(b.a,{variant:"contained",colour:"primary",onClick:function(){return X(!1)},children:"cancel"})})]})]})}()]})]})]})})};n(119);c.a.render(Object(O.jsx)(M,{}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.7afbbc07.chunk.js.map